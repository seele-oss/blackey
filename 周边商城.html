<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>周边商城</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
    body {
    /* 原有样式 */
    margin: 0;
    padding: 0;
    font-family: 'Poppins', sans-serif;
    overflow-x: hidden;
    color: white;
    background: #000;
    
    /* 新增背景图片和固定属性 */
    background-image: url('人物介绍/20.jpg'); /* 替换为实际图片路径 */
    background-attachment: fixed; /* 固定背景不随滚动移动 */
    background-size: cover; /* 背景覆盖整个视口 */
    background-position: center center; /* 背景居中 */
    background-repeat: no-repeat; /* 禁止重复 */
}
    /* 导航栏样式 */
    header {
        display: flex;
        align-items: center;
        justify-content: space-around;
        height: 80px;
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(5px);
        position: fixed;
        width: 100%;
        top: 0;
        z-index: 1000;
        transition: all 0.3s ease;
    }
    header:hover {
        background: rgba(0, 0, 0, 0.7);
        box-shadow: 0 5px 30px rgba(8, 249, 255, 0.2);
    }
    .Logo {
        color: white;
        text-decoration: none;
        font-weight: 700;
        font-size: 24px;
        letter-spacing: 2px;
        text-shadow: 0 0 10px rgba(8, 249, 255, 0.5);
        transition: all 0.3s ease;
    }
    .Logo:hover {
        color: #08f9ff;
        text-shadow: 0 0 20px rgba(8, 249, 255, 0.8);
    }
    .btn {
        display: flex;
        position: relative;
    }
    .btn a {
        color: white;
        text-decoration: none;
        font-weight: 500;
        font-size: 18px;
        padding: 12px 20px;
        margin: 0 5px;
        transition: all 0.3s ease;
        border-radius: 50px;
        position: relative;
        overflow: hidden;
    }
    .btn a::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(8, 249, 255, 0.2), transparent);
        transition: all 0.5s ease;
    }
    .btn a:hover {
        background: rgba(255, 255, 255, 0.1);
        color: #08f9ff;
    }
    .btn a:hover::before {
        left: 100%;
    }
    #marker {
        position: absolute;
        bottom: 10px;
        height: 3px;
        background: #08f9ff;
        border-radius: 3px;
        transition: all 0.3s ease;
        box-shadow: 0 0 10px #08f9ff;
        pointer-events: none;
    }
    .btn a:nth-child(1):hover ~ #marker {
        left: 15px;
        width: 60px;
    }
    .btn a:nth-child(2):hover ~ #marker {
        left: 108px;
        width: 80px;
    }
    .btn a:nth-child(3):hover ~ #marker {
        left: 230px;
        width: 80px;
    }
    .btn a:nth-child(4):hover ~ #marker {
        left: 350px;
        width: 80px;
    }
    .user-actions {
        display: flex;
        align-items: center;
    }
    .user-actions a {
        color: white;
        text-decoration: none;
        font-weight: 500;
        font-size: 16px;
        transition: all 0.3s ease;
    }
    .login {
        padding: 8px 16px;
        border-radius: 50px;
    }
    .login:hover {
        color: #08f9ff;
        text-shadow: 0 0 10px rgba(8, 249, 255, 0.5);
    }
    .signup {
        
    }
    .signup:hover {
        color: #08f9ff;
        text-shadow: 0 0 10px rgba(8, 249, 255, 0.5);
    }
    .profile {
        border: 2px solid rgba(8, 249, 255, 0.5);
        padding: 8px 20px ;
        margin-left: 16px;
        border-radius: 50px;
        display: flex;
        align-items: center;
        transition: all 0.3s ease;
    }
    .profile:hover {
        background: #08f9ff;
        color: black;
        border-color: #08f9ff;
        box-shadow: 0 0 15px rgba(8, 249, 255, 0.8);
    }
    .cart-icon {
        position: relative;
        margin-left: 20px;
        font-size: 20px;
        cursor: pointer;
    }
    .cart-count {
        position: absolute;
        top: -10px;
        right: -10px;
        background: #08f9ff;
        color: #000;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: bold;
    }
	 .particles {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 2;
        pointer-events: none;
    }
    .particle {
        position: absolute;
        width: 2px;
        height: 2px;
        background: rgba(8, 249, 255, 0.8);
        border-radius: 50%;
        animation: float 15s infinite linear;
    }
    @keyframes float {
        0% {
            transform: translateY(0) translateX(0);
            opacity: 0;
        }
        10% {
            opacity: 1;
        }
        90% {
            opacity: 1;
        }
        100% {
            transform: translateY(-100vh) translateX(100px);
            opacity: 0;
        }
    }
    
    /* 英雄部分 */
    .hero {
        width: 100%;
        height: 60vh;
        background: url('https://images.unsplash.com/photo-1608889825103-eb5a6f5ad5d1?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80') no-repeat center center;
        background-size: cover;
        position: relative;
        margin-top: 80px;
    }
    .hero-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.9) 100%);
    }
    .hero-content {
        position: absolute;
        top: 50%;
        left: 10%;
        transform: translateY(-50%);
        max-width: 600px;
    }
    .hero-content h1 {
        font-size: 48px;
        margin: 0;
        line-height: 1.2;
        text-shadow: 0 0 20px rgba(8, 249, 255, 0.5);
    }
    .hero-content h1 span {
        color: #08f9ff;
    }
    .hero-content p {
        font-size: 18px;
        line-height: 1.6;
        margin: 20px 0 30px;
        opacity: 0.9;
    }
    
    /* 商品分类 */
    .categories {
        padding: 50px 10%;
        background: #0a0a0a;
    }
    .section-title {
        font-size: 36px;
        text-align: center;
        margin-bottom: 60px;
        position: relative;
        color: #08f9ff;
        text-shadow: 0 0 15px rgba(8, 249, 255, 0.5);
    }
    .section-title::after {
        content: "";
        display: block;
        width: 80px;
        height: 3px;
        background: #08f9ff;
        margin: 15px auto;
        box-shadow: 0 0 10px #08f9ff;
    }
    .category-list {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 40px;
    }
    .category-item {
        padding: 10px 25px;
        border: 1px solid rgba(8, 249, 255, 0.3);
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    .category-item:hover, .category-item.active {
        background: rgba(8, 249, 255, 0.2);
        color: #08f9ff;
        border-color: #08f9ff;
    }
    
    /* 商品网格 */
    .products {
        padding: 50px 10%;
        background: #111;
    }
    .product-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 30px;
    }
    .product-card {
        background: rgba(20, 20, 20, 0.7);
        border-radius: 15px;
        overflow: hidden;
        transition: all 0.3s ease;
        border: 1px solid rgba(8, 249, 255, 0.2);
        backdrop-filter: blur(5px);
    }
    .product-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 40px rgba(8, 249, 255, 0.2);
        border-color: rgba(8, 249, 255, 0.5);
    }
    .product-image {
        height: 300px;
        overflow: hidden;
    }
    .product-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }
    .product-card:hover .product-image img {
        transform: scale(1.1);
    }
    .product-info {
        padding: 20px;
    }
    .product-title {
        font-size: 20px;
        margin: 0 0 10px;
        color: #fff;
    }
    .product-price {
        font-size: 18px;
        color: #08f9ff;
        margin-bottom: 15px;
    }
    .product-actions {
        display: flex;
        justify-content: space-between;
    }
    .add-to-cart, .view-details {
        padding: 8px 15px;
        border-radius: 50px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    .add-to-cart {
        background: rgba(8, 249, 255, 0.2);
        color: #08f9ff;
        border: 1px solid #08f9ff;
    }
    .add-to-cart:hover {
        background: #08f9ff;
        color: #000;
    }
    .view-details {
        background: transparent;
        color: #fff;
        border: 1px solid rgba(255, 255, 255, 0.3);
    }
    .view-details:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: #fff;
    }
    
    /* 购物车侧边栏 */
    .cart-sidebar {
        position: fixed;
        top: 0;
        right: -400px;
        width: 400px;
        height: 100vh;
        background: rgba(10, 10, 10, 0.95);
        backdrop-filter: blur(10px);
        border-left: 1px solid rgba(8, 249, 255, 0.3);
        z-index: 2000;
        transition: right 0.3s ease;
        overflow-y: auto;
    }
    .cart-sidebar.open {
        right: 0;
    }
    .cart-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    .cart-header h3 {
        margin: 0;
        font-size: 24px;
        color: #08f9ff;
    }
    .close-cart {
        font-size: 24px;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    .close-cart:hover {
        color: #08f9ff;
        transform: rotate(90deg);
    }
    .cart-items {
        padding: 20px;
    }
    .cart-item {
        display: flex;
        margin-bottom: 20px;
        padding-bottom: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    .cart-item-image {
        width: 80px;
        height: 80px;
        border-radius: 10px;
        overflow: hidden;
        margin-right: 15px;
    }
    .cart-item-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    .cart-item-details {
        flex: 1;
    }
    .cart-item-title {
        font-size: 16px;
        margin: 0 0 5px;
    }
    .cart-item-price {
        font-size: 14px;
        color: #08f9ff;
        margin-bottom: 10px;
    }
    .cart-item-quantity {
        display: flex;
        align-items: center;
    }
    .quantity-btn {
        width: 25px;
        height: 25px;
        background: rgba(255, 255, 255, 0.1);
        border: none;
        color: white;
        border-radius: 4px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .quantity-input {
        width: 40px;
        text-align: center;
        margin: 0 5px;
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: white;
        border-radius: 4px;
    }
    .remove-item {
        margin-left: 15px;
        color: #ff4d4d;
        cursor: pointer;
        font-size: 14px;
    }
    .cart-total {
        padding: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    .total-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
    }
    .total-label {
        font-size: 16px;
    }
    .total-amount {
        font-size: 18px;
        color: #08f9ff;
        font-weight: 600;
    }
    .checkout-btn {
        width: 100%;
        padding: 12px;
        background: #08f9ff;
        color: #000;
        border: none;
        border-radius: 50px;
        font-weight: 600;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 20px;
    }
    .checkout-btn:hover {
        background: #00e5ff;
        box-shadow: 0 0 15px rgba(8, 249, 255, 0.5);
    }
    
    /* 页脚 */
    footer {
        background: #0a0a0a;
        padding: 50px 10%;
        text-align: center;
    }
    .footer-logo {
        font-size: 24px;
        font-weight: 700;
        color: #08f9ff;
        margin-bottom: 20px;
        text-shadow: 0 0 10px rgba(8, 249, 255, 0.5);
    }
    .footer-links {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 30px;
    }
    .footer-links a {
        color: white;
        text-decoration: none;
        transition: all 0.3s ease;
    }
    .footer-links a:hover {
        color: #08f9ff;
    }
    .social-icons {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 30px;
    }
    .social-icons a {
        color: white;
        font-size: 20px;
        transition: all 0.3s ease;
    }
    .social-icons a:hover {
        color: #08f9ff;
        transform: translateY(-3px);
    }
    .copyright {
        font-size: 14px;
        opacity: 0.7;
    }
    
    /* 遮罩层 */
    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 1500;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
    }
    .overlay.active {
        opacity: 1;
        visibility: visible;
    }
    
    /* 响应式设计 */
    @media (max-width: 768px) {
        .hero-content {
            left: 5%;
            max-width: 90%;
        }
        .hero-content h1 {
            font-size: 36px;
        }
        .cart-sidebar {
            width: 100%;
            right: -100%;
        }
        .product-grid {
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        }
    }
</style>
</head>

<body>
	 <div class="particles" id="particles"></div>
    <!-- 导航栏 -->
    <header>
        <div class="Logo">黑悟空神话</div>
        <div class="btn">
            <a href="index.html">首页</a>
            <a href="西游文化.html">西游文化</a>
            <a href="大圣觉醒.html">大圣觉醒</a>
			<a href="玩家社区.html">玩家社区</a>
            <a href="周边商城.html" class="active">周边商城</a>
            <div id="marker"></div>
        </div>
        <div class="user-actions">
            <a class="login" href="">登录</a>
            <a class="signup" href="">注册</a>
			 <a class="profile" href="个人中心.html">个人中心</a>
            <div class="cart-icon" id="cart-icon">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-count">0</span>
            </div>
        </div>
    </header>
    
    <!-- 英雄区域 -->
    <div class="hero">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1>限量版<span>黑悟空</span>手办</h1>
            <p>收藏精美的黑悟空神话系列手办，每一件都由专业艺术家精心制作，完美还原游戏中的经典角色和场景。</p>
        </div>
    </div>
    
    <!-- 商品分类 -->
    <section class="categories">
        <h2 class="section-title">精选收藏</h2>
        <div class="category-list">
            <div class="category-item active">全部商品</div>
            <div class="category-item">悟空系列</div>
            <div class="category-item">妖怪系列</div>
            <div class="category-item">天神系列</div>
            <div class="category-item">限定版</div>
        </div>
    </section>
    
    <!-- 商品网格 -->
    <section class="products">
        <div class="product-grid">
            <!-- 商品1 -->
            <div class="product-card">
                <div class="product-image">
                    <img src="手办/黑悟空.jpg" alt="黑悟空手办">
                </div>
                <div class="product-info">
                    <h3 class="product-title">黑悟空 - 战斗姿态</h3>
                    <div class="product-price">¥599</div>
                    <div class="product-actions">
                        <button class="add-to-cart">加入购物车</button>
                        <button class="view-details">查看详情</button>
                    </div>
                </div>
            </div>
            
            <!-- 商品2 -->
            <div class="product-card">
                <div class="product-image">
                    <img src="手办/二郎神.jpg" style="width: 300px; height:500px ;"  alt="二郎神">
                </div>
                <div class="product-info">
                    <h3 class="product-title">杨戬 - 幻化形态</h3>
                    <div class="product-price">¥499</div>
                    <div class="product-actions">
                        <button class="add-to-cart">加入购物车</button>
                        <button class="view-details">查看详情</button>
                    </div>
                </div>
            </div>
            
            <!-- 商品3 -->
            <div class="product-card">
                <div class="product-image">
                    <img src="手办/牛魔王.jpg" style="width: 300px; height: 500px;"  alt="牛魔王手办">
                </div>
                <div class="product-info">
                    <h3 class="product-title">牛魔王 - 火焰形态</h3>
                    <div class="product-price">¥699</div>
                    <div class="product-actions">
                        <button class="add-to-cart">加入购物车</button>
                        <button class="view-details">查看详情</button>
                    </div>
                </div>
            </div>
            
            <!-- 商品4 -->
            <div class="product-card">
                <div class="product-image">
                    <img src="手办/黄眉.jpg" alt="黄眉">
                </div>
                <div class="product-info">
                    <h3 class="product-title">黄眉</h3>
                    <div class="product-price">¥799</div>
                    <div class="product-actions">
                        <button class="add-to-cart">加入购物车</button>
                        <button class="view-details">查看详情</button>
                    </div>
                </div>
            </div>
            
            <!-- 商品5 -->
            <div class="product-card">
                <div class="product-image">
                    <img src="手办/不白.jpg" style="width: 300px; height: 500px;"  alt="不白">
                </div>
                <div class="product-info">
                    <h3 class="product-title">不白</h3>
                    <div class="product-price">¥399</div>
                    <div class="product-actions">
                        <button class="add-to-cart">加入购物车</button>
                        <button class="view-details">查看详情</button>
                    </div>
                </div>
            </div>
            
            <!-- 商品6 -->
            <div class="product-card">
                <div class="product-image">
                    <img src="手办/毒敌大王.jpg" style="width: 300px; height: 500px;"  alt="毒敌大王手办">
                </div>
                <div class="product-info">
                    <h3 class="product-title">毒敌大王</h3>
                    <div class="product-price">¥899</div>
                    <div class="product-actions">
                        <button class="add-to-cart">加入购物车</button>
                        <button class="view-details">查看详情</button>
                    </div>
                </div>
            </div>
            
            <!-- 商品7 -->
            <div class="product-card">
                <div class="product-image">
                    <img src="手办/猪八戒.jpg" alt="猪八戒手办">
                </div>
                <div class="product-info">
                    <h3 class="product-title">猪八戒 - 战斗形态</h3>
                    <div class="product-price">¥599</div>
                    <div class="product-actions">
                        <button class="add-to-cart">加入购物车</button>
                        <button class="view-details">查看详情</button>
                    </div>
                </div>
            </div>
            
            <!-- 商品8 -->
            <div class="product-card">
                <div class="product-image">
                    <img src="手办/红魔王.jpg" style="width: 300px; height: 500px;"  alt="红魔王手办">
                </div>
                <div class="product-info">
                    <h3 class="product-title">红魔王</h3>
                    <div class="product-price">¥499</div>
                    <div class="product-actions">
                        <button class="add-to-cart">加入购物车</button>
                        <button class="view-details">查看详情</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- 购物车侧边栏 -->
    <div class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header">
            <h3>我的购物车</h3>
            <div class="close-cart" id="close-cart">
                <i class="fas fa-times"></i>
            </div>
        </div>
        <div class="cart-items" id="cart-items">
            <!-- 购物车项目将通过JavaScript动态添加 -->
            <div class="empty-cart-message" style="text-align: center; padding: 50px 0;">
                <i class="fas fa-shopping-cart" style="font-size: 50px; opacity: 0.3; margin-bottom: 20px;"></i>
                <p>购物车是空的</p>
            </div>
        </div>
        <div class="cart-total">
            <div class="total-row">
                <span class="total-label">小计:</span>
                <span class="total-amount" id="subtotal">¥0</span>
            </div>
            <div class="total-row">
                <span class="total-label">运费:</span>
                <span class="total-amount" id="shipping">¥0</span>
            </div>
            <div class="total-row">
                <span class="total-label">总计:</span>
                <span class="total-amount" id="total">¥0</span>
            </div>
            <button class="checkout-btn">结算</button>
        </div>
    </div>
    
    <!-- 遮罩层 -->
    <div class="overlay" id="overlay"></div>
    
    <!-- 页脚 -->
    <footer>
        <div class="footer-logo">黑悟空神话</div>
        <div class="footer-links">
            <a href="#">关于我们</a>
            <a href="#">联系我们</a>
            <a href="#">隐私政策</a>
            <a href="#">配送信息</a>
            <a href="#">退换政策</a>
        </div>
        <div class="social-icons">
            <a href="#"><i class="fab fa-weibo"></i></a>
            <a href="#"><i class="fab fa-weixin"></i></a>
            <a href="#"><i class="fab fa-bilibili"></i></a>
            <a href="#"><i class="fab fa-youtube"></i></a>
        </div>
        <div class="copyright">
            © 2023 黑悟空神话. 版权所有.
        </div>
    </footer>
    
    <script>
    // 商品数据
    const productsData = [
        {
            title: "黑悟空 - 战斗姿态",
            price: 599,
            image: "手办/黑悟空.jpg",
            category: "悟空系列"
        },
        {
            title: "杨戬 - 幻化形态",
            price: 499,
            image: "手办/二郎神.jpg",
            style: "width: 300px; height:500px;",
            category: "天神系列"
        },
        {
            title: "牛魔王 - 火焰形态",
            price: 699,
            image: "手办/牛魔王.jpg",
            style: "width: 300px; height: 500px;",
            category: "妖怪系列"
        },
        {
            title: "黄眉",
            price: 799,
            image: "手办/黄眉.jpg",
            category: "妖怪系列"
        },
        {
            title: "不白",
            price: 399,
            image: "手办/不白.jpg",
            style: "width: 300px; height: 500px;",
            category: "妖怪系列"
        },
        {
            title: "毒敌大王",
            price: 899,
            image: "手办/毒敌大王.jpg",
            style: "width: 300px; height: 500px;",
            category: "妖怪系列"
        },
        {
            title: "猪八戒 - 战斗形态",
            price: 599,
            image: "手办/猪八戒.jpg",
            category: "限定版"
        },
        {
            title: "红魔王",
            price: 499,
            image: "手办/红魔王.jpg",
            style: "width: 300px; height: 500px;",
            category: "妖怪系列"
        }
    ];

    // 购物车功能
    const cartIcon = document.getElementById('cart-icon');
    const cartSidebar = document.getElementById('cart-sidebar');
    const closeCart = document.getElementById('close-cart');
    const overlay = document.getElementById('overlay');
    const cartItemsContainer = document.getElementById('cart-items');
    const cartCount = document.querySelector('.cart-count');
    const subtotalElement = document.getElementById('subtotal');
    const shippingElement = document.getElementById('shipping');
    const totalElement = document.getElementById('total');
    const productGrid = document.querySelector('.product-grid');
    
    let cart = [];
    
    // 初始化商品展示
    function renderProducts(category = '全部商品') {
        productGrid.innerHTML = '';
        
        const filteredProducts = category === '全部商品' 
            ? productsData 
            : productsData.filter(product => product.category === category);
        
        filteredProducts.forEach(product => {
            const productCard = document.createElement('div');
            productCard.className = 'product-card';
            productCard.innerHTML = `
                <div class="product-image">
                    <img src="${product.image}" alt="${product.title}" ${product.style ? `style="${product.style}"` : ''}>
                </div>
                <div class="product-info">
                    <h3 class="product-title">${product.title}</h3>
                    <div class="product-price">¥${product.price}</div>
                    <div class="product-actions">
                        <button class="add-to-cart">加入购物车</button>
                        <button class="view-details">查看详情</button>
                    </div>
                </div>
            `;
            productGrid.appendChild(productCard);
        });
        
        // 重新绑定添加购物车事件
        document.querySelectorAll('.add-to-cart').forEach(button => {
            button.addEventListener('click', () => {
                const productCard = button.closest('.product-card');
                const productTitle = productCard.querySelector('.product-title').textContent;
                const product = productsData.find(p => p.title === productTitle);
                
                // 检查商品是否已在购物车中
                const existingItem = cart.find(item => item.title === product.title);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        title: product.title,
                        price: product.price,
                        image: product.image,
                        quantity: 1
                    });
                }
                
                updateCart();
                cartSidebar.classList.add('open');
                overlay.classList.add('active');
                
                // 添加动画效果
                button.textContent = '已添加';
                button.style.backgroundColor = '#4CAF50';
                setTimeout(() => {
                    button.textContent = '加入购物车';
                    button.style.backgroundColor = 'rgba(8, 249, 255, 0.2)';
                }, 1000);
            });
        });
    }
    
    // 初始化页面
    renderProducts();
    
    // 打开购物车
    cartIcon.addEventListener('click', () => {
        cartSidebar.classList.add('open');
        overlay.classList.add('active');
    });
    
    // 关闭购物车
    closeCart.addEventListener('click', () => {
        cartSidebar.classList.remove('open');
        overlay.classList.remove('active');
    });
    
    overlay.addEventListener('click', () => {
        cartSidebar.classList.remove('open');
        overlay.classList.remove('active');
    });
    
    // 更新购物车
    function updateCart() {
        // 更新购物车数量
        const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
        cartCount.textContent = totalItems;
        
        // 更新购物车内容
        if (cart.length === 0) {
            cartItemsContainer.innerHTML = `
                <div class="empty-cart-message" style="text-align: center; padding: 50px 0;">
                    <i class="fas fa-shopping-cart" style="font-size: 50px; opacity: 0.3; margin-bottom: 20px;"></i>
                    <p>购物车是空的</p>
                </div>
            `;
        } else {
            cartItemsContainer.innerHTML = '';
            cart.forEach((item, index) => {
                const cartItemElement = document.createElement('div');
                cartItemElement.className = 'cart-item';
                cartItemElement.innerHTML = `
                    <div class="cart-item-image">
                        <img src="${item.image}" alt="${item.title}">
                    </div>
                    <div class="cart-item-details">
                        <h4 class="cart-item-title">${item.title}</h4>
                        <div class="cart-item-price">¥${item.price.toFixed(2)}</div>
                        <div class="cart-item-quantity">
                            <button class="quantity-btn minus" data-index="${index}">-</button>
                            <input type="text" class="quantity-input" value="${item.quantity}" readonly>
                            <button class="quantity-btn plus" data-index="${index}">+</button>
                            <span class="remove-item" data-index="${index}">删除</span>
                        </div>
                    </div>
                `;
                cartItemsContainer.appendChild(cartItemElement);
            });
            
            // 添加数量增减和删除事件
            document.querySelectorAll('.minus').forEach(button => {
                button.addEventListener('click', () => {
                    const index = button.dataset.index;
                    if (cart[index].quantity > 1) {
                        cart[index].quantity -= 1;
                        updateCart();
                    }
                });
            });
            
            document.querySelectorAll('.plus').forEach(button => {
                button.addEventListener('click', () => {
                    const index = button.dataset.index;
                    cart[index].quantity += 1;
                    updateCart();
                });
            });
            
            document.querySelectorAll('.remove-item').forEach(button => {
                button.addEventListener('click', () => {
                    const index = button.dataset.index;
                    cart.splice(index, 1);
                    updateCart();
                });
            });
        }
        
        // 计算总价
        const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
        const shipping = subtotal > 0 ? 50 : 0; // 假设运费50元
        const total = subtotal + shipping;
        
        subtotalElement.textContent = `¥${subtotal.toFixed(2)}`;
        shippingElement.textContent = `¥${shipping.toFixed(2)}`;
        totalElement.textContent = `¥${total.toFixed(2)}`;
    }
    
    // 分类切换
    const categoryItems = document.querySelectorAll('.category-item');
    categoryItems.forEach(item => {
        item.addEventListener('click', () => {
            categoryItems.forEach(i => i.classList.remove('active'));
            item.classList.add('active');
            
            // 根据选择的分类筛选商品
            const category = item.textContent;
            renderProducts(category);
        });
    });
    
    // 导航栏滚动效果
    window.addEventListener('scroll', () => {
        const header = document.querySelector('header');
        if (window.scrollY > 50) {
            header.style.background = 'rgba(0, 0, 0, 0.9)';
            header.style.boxShadow = '0 5px 20px rgba(0, 0, 0, 0.5)';
        } else {
            header.style.background = 'rgba(255, 255, 255, 0.2)';
            header.style.boxShadow = 'none';
        }
    });
    
    // 粒子效果
    const particlesContainer = document.getElementById('particles');
    const particleCount = 50;
    
    for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        
        // 随机位置
        const posX = Math.random() * 100;
        const posY = Math.random() * 100 + 100; // 从屏幕底部开始
        
        // 随机大小
        const size = Math.random() * 3 + 1;
        
        // 随机透明度
        const opacity = Math.random() * 0.5 + 0.3;
        
        // 随机动画延迟
        const delay = Math.random() * 15;
        
        // 随机动画持续时间
        const duration = Math.random() * 10 + 10;
        
        particle.style.left = `${posX}%`;
        particle.style.top = `${posY}%`;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.opacity = opacity;
        particle.style.animationDelay = `${delay}s`;
        particle.style.animationDuration = `${duration}s`;
        
        particlesContainer.appendChild(particle);
    }
</script>
</body>
</html>